<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Character Sheet | LHA Collective</title>
    
    <!-- Fonts & Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;900&family=Space+Grotesk:wght@700&family=JetBrains+Mono:wght@500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        'display': ['"Space Grotesk"', 'sans-serif'],
                        'body': ['"Outfit"', 'sans-serif'],
                        'mono': ['"JetBrains Mono"', 'monospace'],
                    },
                    colors: {
                        'ink': '#09090b', 'paper': '#fdfbf7', 'primary': '#8b5cf6',
                        'pop-pink': '#ff2a6d', 'cyber-cyan': '#05d9e8', 'neon-lime': '#d1f25e',
                    },
                    boxShadow: {
                        'manga': '4px 4px 0px 0px #09090b',
                        'manga-sm': '2px 2px 0px 0px #09090b',
                        'neon': '0 0 15px rgba(139, 92, 246, 0.3)',
                    }
                }
            }
        }
    </script>

    <style>
        /* Custom Utilities */
        .bg-grid-pattern { background-size: 40px 40px; background-image: linear-gradient(to right, #e5e7eb 1px, transparent 1px), linear-gradient(to bottom, #e5e7eb 1px, transparent 1px); }
        .dark .bg-grid-pattern { background-image: linear-gradient(to right, #27272a 1px, transparent 1px), linear-gradient(to bottom, #27272a 1px, transparent 1px); }
        
        /* Tab Active States */
        .nav-btn.active { background-color: #09090b; color: #d1f25e; border-color: #09090b; }
        .dark .nav-btn.active { background-color: #ffffff; color: #09090b; border-color: #ffffff; box-shadow: 0 0 10px rgba(255,255,255,0.5); }
        
        /* Mobile Nav Active */
        .mobile-nav-btn.active { color: #8b5cf6; background-color: rgba(139, 92, 246, 0.1); }
        .dark .mobile-nav-btn.active { color: #d1f25e; background-color: rgba(209, 242, 94, 0.1); }

        .animate-fade-in { animation: fadeIn 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        /* Scrollbar Hiding */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body class="text-ink bg-paper dark:bg-black dark:text-gray-200 font-body transition-colors duration-300 pb-28 lg:pb-0 min-h-screen flex flex-col">

    <!-- Auth Check (Immediate) -->
    <script>
        if (!localStorage.getItem('userId')) window.location.href = '/src/screens/auth/signin.html';
    </script>

    <!-- Background Grid -->
    <div class="fixed inset-0 z-0 bg-grid-pattern opacity-40 dark:opacity-10 pointer-events-none"></div>

    <!-- Top Navbar -->
    <nav class="fixed top-0 left-0 right-0 z-50 px-4 py-4">
        <div class="container mx-auto max-w-6xl">
            <div class="bg-white/90 dark:bg-zinc-900/90 backdrop-blur-md border-2 border-ink dark:border-zinc-700 rounded-xl px-5 py-3 flex justify-between items-center shadow-manga-sm dark:shadow-none">
                <a href="/index.html" class="flex items-center gap-2 font-mono font-bold text-xs uppercase hover:text-primary transition-colors group">
                    <i class="fas fa-arrow-left group-hover:-translate-x-1 transition-transform"></i> 
                    <span>Exit Game</span>
                </a>
                <div class="flex items-center gap-4">
                    <div class="hidden md:flex items-center gap-2 font-mono text-[10px] tracking-widest bg-gray-100 dark:bg-zinc-800 px-2 py-1 rounded border border-gray-200 dark:border-zinc-700">
                        <span class="text-green-500 animate-pulse">‚óè</span> ONLINE
                    </div>
                    <button id="theme-toggle" class="w-8 h-8 rounded border border-gray-300 dark:border-zinc-600 flex items-center justify-center hover:bg-gray-100 dark:hover:bg-zinc-800 transition-colors">
                        <i class="fas fa-moon block dark:hidden text-xs"></i>
                        <i class="fas fa-sun hidden dark:block text-xs text-yellow-400"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>
    
    <!-- Main Layout -->
    <main class="relative z-10 pt-28 lg:pt-32 pb-6 px-4 flex-grow">
        <div class="container mx-auto max-w-6xl">
            
            <!-- MOBILE HEADER (Visible only on small screens) -->
            <!-- Note: data-bind attributes link this to the JS logic automatically -->
            <div class="lg:hidden mb-6 animate-fade-in">
                <div class="bg-white dark:bg-zinc-900 border-2 border-ink dark:border-zinc-700 rounded-xl p-4 shadow-manga-sm flex items-center gap-4 relative overflow-hidden">
                    <div class="absolute right-0 top-0 h-full w-20 bg-gradient-to-l from-gray-100 to-transparent dark:from-zinc-800 opacity-50 pointer-events-none"></div>
                    
                    <div class="relative flex-shrink-0">
                        <img src="/src/assets/default-avatar.jpg" data-bind="avatar" class="w-16 h-16 rounded-lg border-2 border-ink dark:border-white object-cover bg-gray-200">
                        <div data-bind="level" class="absolute -bottom-2 -right-2 bg-neon-lime text-ink text-[8px] font-bold px-1.5 py-0.5 border border-ink rounded z-20">LVL. ?</div>
                    </div>
                    
                    <div class="flex-1 min-w-0 z-10">
                        <h2 data-bind="username" class="font-display font-black text-lg uppercase truncate leading-none mb-1">Loading...</h2>
                        <p class="text-xs font-mono text-primary mb-2 truncate">Class: <span data-bind="job">...</span></p>
                        <!-- XP Bar -->
                        <div class="flex items-center gap-2">
                            <div class="flex-1 bg-gray-200 dark:bg-zinc-800 h-1.5 rounded-full overflow-hidden border border-gray-300 dark:border-zinc-600">
                                <div data-bind="xp-bar" class="bg-gradient-to-r from-primary to-pop-pink h-full w-[0%] transition-all duration-700"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- DESKTOP GRID LAYOUT -->
            <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
                
                <!-- LEFT SIDEBAR (Desktop Only) -->
                <aside class="hidden lg:block lg:col-span-1 space-y-6 sticky top-32">
                    <!-- Player Card -->
                    <div class="bg-white dark:bg-zinc-900 border-2 border-ink dark:border-zinc-700 rounded-xl overflow-hidden shadow-manga dark:shadow-neon transition-all">
                        <div class="bg-ink dark:bg-white text-white dark:text-ink p-2 text-center font-mono text-[10px] uppercase font-bold tracking-widest">Player Card</div>
                        <div class="p-6 text-center">
                            <div class="relative inline-block mb-4 group">
                                <div class="absolute inset-0 bg-primary rounded-full blur opacity-20 group-hover:opacity-40 transition-opacity"></div>
                                <img src="/src/assets/default-avatar.jpg" data-bind="avatar" class="w-24 h-24 rounded-full border-4 border-ink dark:border-white object-cover bg-gray-200 relative z-10 cursor-pointer hover:scale-105 transition-transform" id="avatar-trigger" title="Upload Avatar">
                                <input type="file" id="avatar-upload-input" class="hidden" accept="image/*">
                                <div data-bind="level" class="absolute -bottom-2 -right-2 bg-neon-lime text-ink text-[10px] font-bold px-2 py-1 border-2 border-ink rounded z-20">LVL. ?</div>
                            </div>
                            
                            <h2 data-bind="username" class="font-display font-black text-xl uppercase mb-1">Loading...</h2>
                            <p class="text-gray-500 dark:text-gray-400 text-xs font-mono mb-6">Class: <span data-bind="job" class="text-primary font-bold">...</span></p>
                            
                            <!-- XP Bar Desktop -->
                            <div class="w-full bg-gray-200 dark:bg-zinc-800 h-3 border border-ink dark:border-zinc-600 rounded-full overflow-hidden mb-1 relative">
                                <div data-bind="xp-bar" class="bg-gradient-to-r from-primary to-pop-pink h-full w-[0%] transition-all duration-700"></div>
                            </div>
                            <div class="flex justify-between text-[10px] font-mono text-gray-400 font-bold">
                                <span>XP</span>
                                <span data-bind="xp-text">0 / 0</span>
                            </div>
                        </div>
                    </div>

                    <!-- Desktop Navigation -->
                    <nav class="flex flex-col gap-3">
                        <button data-tab="overview" class="nav-btn active text-left px-4 py-3 border-2 border-transparent rounded-lg font-display font-bold uppercase text-sm hover:border-gray-200 dark:hover:border-zinc-700 transition-all flex items-center gap-3">
                            <i class="fas fa-id-card w-5 text-center"></i> Character Sheet
                        </button>
                        
                        <button data-tab="projects" class="nav-btn text-left px-4 py-3 border-2 border-transparent rounded-lg font-display font-bold uppercase text-sm hover:border-gray-200 dark:hover:border-zinc-700 transition-all flex items-center gap-3">
                            <i class="fas fa-scroll w-5 text-center"></i> Quest Log
                        </button>

                        <button id="logout-btn-desktop" class="text-left px-4 py-3 border-2 border-transparent rounded-lg font-display font-bold uppercase text-sm text-pop-pink hover:bg-pop-pink/10 transition-all mt-4 border-t border-gray-200 dark:border-zinc-800 flex items-center gap-3">
                            <i class="fas fa-power-off w-5 text-center"></i> Disconnect
                        </button>
                    </nav>
                </aside>

                <!-- MAIN CONTENT PANEL -->
                <div class="lg:col-span-3">
                    <!-- System File Header -->
                    <div class="flex items-center gap-1 mb-[-2px] px-2">
                        <div class="bg-ink dark:bg-white text-white dark:text-ink px-6 py-2 font-mono text-xs font-bold border-2 border-ink dark:border-white border-b-0 rounded-t-lg transition-colors">
                            <i class="fas fa-terminal mr-2"></i><span id="folder-label">overview.sys</span>
                        </div>
                        <div class="h-2 w-2 bg-ink dark:bg-white rounded-full opacity-50"></div>
                        <div class="h-2 w-2 bg-ink dark:bg-white rounded-full opacity-25"></div>
                    </div>

                    <!-- Panel Body -->
                    <div class="bg-white dark:bg-zinc-900 border-2 border-ink dark:border-white rounded-b-xl rounded-tr-xl shadow-manga dark:shadow-[0_0_20px_rgba(255,255,255,0.1)] p-6 md:p-10 min-h-[600px] relative overflow-hidden">
                        
                        <!-- Background Decoration -->
                         <div class="absolute top-0 right-0 p-10 opacity-5 pointer-events-none">
                            <i class="fas fa-fingerprint text-9xl"></i>
                        </div>

                        <!-- TAB 1: OVERVIEW -->
                        <div id="overview-pane" class="tab-pane block animate-fade-in relative z-10">
                            <!-- Header -->
                            <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-8 border-b border-gray-200 dark:border-zinc-700 pb-6 gap-4">
                                <div>
                                    <h1 class="font-display font-black text-3xl md:text-4xl uppercase tracking-tight">Stats & Config</h1>
                                    <p class="text-gray-500 font-mono text-xs mt-1">Manage your public profile settings.</p>
                                </div>
                                <button id="save-profile-btn" class="w-full md:w-auto bg-neon-lime text-ink border-2 border-ink px-6 py-2 rounded-lg font-bold text-xs uppercase shadow-manga-sm hover:translate-y-0.5 hover:shadow-none transition-all flex items-center justify-center gap-2">
                                    <i class="fas fa-save"></i> Save Changes
                                </button>
                            </div>

                            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                                <!-- Stats Column -->
                                <div class="space-y-8">
                                    <div class="bg-gray-50 dark:bg-black p-5 border-2 border-dashed border-gray-300 dark:border-zinc-700 rounded-xl">
                                        <h3 class="font-mono font-bold text-xs text-gray-500 mb-5 uppercase tracking-wider flex items-center gap-2">
                                            <i class="fas fa-chart-bar"></i> Attributes
                                        </h3>
                                        <!-- Attributes Loop -->
                                        <div class="space-y-5">
                                            <div>
                                                <div class="flex justify-between text-[10px] font-bold mb-1.5 font-mono">
                                                    <span>INT (Code)</span><span data-bind="attr-int" class="text-primary">LVL ?</span>
                                                </div>
                                                <div class="w-full bg-gray-200 dark:bg-zinc-800 h-2 rounded-full overflow-hidden border border-gray-300 dark:border-zinc-600">
                                                    <div data-bind="bar-int" class="bg-primary h-full w-[0%] shadow-[0_0_10px_#8b5cf6] transition-all duration-1000"></div>
                                                </div>
                                            </div>
                                            <div>
                                                <div class="flex justify-between text-[10px] font-bold mb-1.5 font-mono">
                                                    <span>DEX (Design)</span><span data-bind="attr-dex" class="text-pop-pink">LVL ?</span>
                                                </div>
                                                <div class="w-full bg-gray-200 dark:bg-zinc-800 h-2 rounded-full overflow-hidden border border-gray-300 dark:border-zinc-600">
                                                    <div data-bind="bar-dex" class="bg-pop-pink h-full w-[0%] shadow-[0_0_10px_#ff2a6d] transition-all duration-1000"></div>
                                                </div>
                                            </div>
                                            <div>
                                                <div class="flex justify-between text-[10px] font-bold mb-1.5 font-mono">
                                                    <span>CHA (Comms)</span><span data-bind="attr-cha" class="text-cyber-cyan">LVL ?</span>
                                                </div>
                                                <div class="w-full bg-gray-200 dark:bg-zinc-800 h-2 rounded-full overflow-hidden border border-gray-300 dark:border-zinc-600">
                                                    <div data-bind="bar-cha" class="bg-cyber-cyan h-full w-[0%] transition-all duration-1000"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Badges -->
                                    <div>
                                        <h3 class="font-mono font-bold text-xs text-gray-500 mb-3 uppercase tracking-wider">Inventory / Badges</h3>
                                        <div class="grid grid-cols-4 gap-3">
                                            <div class="aspect-square bg-white dark:bg-zinc-800 border-2 border-gray-200 dark:border-zinc-600 rounded-lg flex items-center justify-center text-xl hover:border-primary cursor-help transition-colors" title="Early Adopter">üöÄ</div>
                                            <div class="aspect-square bg-white dark:bg-zinc-800 border-2 border-gray-200 dark:border-zinc-600 rounded-lg flex items-center justify-center text-xl hover:border-pop-pink cursor-help transition-colors" title="Bug Hunter">üêõ</div>
                                            <div class="aspect-square bg-white dark:bg-zinc-800 border-2 border-gray-200 dark:border-zinc-600 rounded-lg flex items-center justify-center text-xl hover:border-cyber-cyan cursor-help transition-colors" title="Scholar">üìú</div>
                                            <div class="aspect-square border-2 border-dashed border-gray-300 dark:border-zinc-700 rounded-lg flex items-center justify-center text-gray-400 text-xs font-mono">...</div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Form Column -->
                                <div class="md:col-span-2 space-y-6">
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                        <div>
                                            <label class="block font-bold mb-2 text-xs font-mono uppercase text-gray-500">Display Name</label>
                                            <input type="text" id="input-displayName" class="w-full bg-gray-50 dark:bg-black border-2 border-gray-200 dark:border-zinc-700 rounded-lg p-3 font-medium focus:border-ink dark:focus:border-white focus:outline-none transition-all placeholder-gray-300">
                                        </div>
                                        <div>
                                            <label class="block font-bold mb-2 text-xs font-mono uppercase text-gray-500">Job Class</label>
                                            <div class="relative">
                                                <select id="input-jobClass" class="w-full bg-gray-50 dark:bg-black border-2 border-gray-200 dark:border-zinc-700 rounded-lg p-3 font-medium focus:border-ink dark:focus:border-white focus:outline-none appearance-none transition-all cursor-pointer">
                                                    <option>Webmancer (Developer)</option>
                                                    <option>Pixel Artist (Designer)</option>
                                                    <option>Game Master (Manager)</option>
                                                </select>
                                                <i class="fas fa-chevron-down absolute right-4 top-4 text-xs pointer-events-none text-gray-400"></i>
                                            </div>
                                        </div>
                                    </div>
                                    <div>
                                        <label class="block font-bold mb-2 text-xs font-mono uppercase text-gray-500">Bio / Status</label>
                                        <textarea id="input-bio" rows="3" class="w-full bg-gray-50 dark:bg-black border-2 border-gray-200 dark:border-zinc-700 rounded-lg p-3 font-medium focus:border-ink dark:focus:border-white focus:outline-none text-sm transition-all resize-none"></textarea>
                                    </div>
                                    
                                    <div class="bg-blue-50/50 dark:bg-zinc-800/50 p-6 rounded-xl border border-blue-100 dark:border-zinc-700">
                                        <h3 class="font-mono font-bold text-xs text-blue-500 dark:text-blue-400 mb-4 uppercase tracking-wider flex items-center gap-2">
                                            <i class="fas fa-link"></i> Linked Equipment
                                        </h3>
                                        <div class="grid grid-cols-1 gap-4">
                                            <div class="flex items-center group">
                                                <span class="w-12 h-10 bg-white dark:bg-zinc-800 border-2 border-gray-200 dark:border-zinc-600 flex items-center justify-center rounded-l-lg border-r-0 group-focus-within:border-ink dark:group-focus-within:border-white transition-colors"><i class="fab fa-github"></i></span>
                                                <input type="text" id="input-github" placeholder="github.com/username" class="flex-1 bg-white dark:bg-zinc-900 border-2 border-gray-200 dark:border-zinc-600 rounded-r-lg p-2 h-10 text-sm focus:border-ink dark:focus:border-white focus:outline-none transition-colors">
                                            </div>
                                            <div class="flex items-center group">
                                                <span class="w-12 h-10 bg-white dark:bg-zinc-800 border-2 border-gray-200 dark:border-zinc-600 flex items-center justify-center rounded-l-lg border-r-0 group-focus-within:border-ink dark:group-focus-within:border-white transition-colors"><i class="fas fa-globe"></i></span>
                                                <input type="text" id="input-portfolio" placeholder="yourportfolio.com" class="flex-1 bg-white dark:bg-zinc-900 border-2 border-gray-200 dark:border-zinc-600 rounded-r-lg p-2 h-10 text-sm focus:border-ink dark:focus:border-white focus:outline-none transition-colors">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- TAB 2: PROJECTS -->
                        <div id="projects-pane" class="tab-pane hidden animate-fade-in relative z-10">
                            <div class="flex flex-col md:flex-row justify-between items-end mb-8 border-b border-gray-200 dark:border-zinc-700 pb-6 gap-4">
                                <div>
                                    <h1 class="font-display font-black text-3xl md:text-4xl uppercase">Active Quests</h1>
                                    <p class="text-gray-500 dark:text-gray-400 font-mono text-sm mt-1">Current mission log and submissions.</p>
                                </div>
                                <a href="/src/screens/projects/myprojects.html" class="bg-ink dark:bg-white text-white dark:text-ink border-2 border-transparent px-5 py-2 rounded-lg font-bold text-xs uppercase shadow-lg hover:-translate-y-0.5 transition-all">
                                    Full Directory <i class="fas fa-arrow-right ml-2"></i>
                                </a>
                            </div>

                            <div id="projects-grid" class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-6">
                                <!-- Projects Loaded by JS -->
                                <div class="col-span-full py-12 text-center">
                                    <i class="fas fa-circle-notch fa-spin text-primary text-2xl"></i>
                                </div>
                            </div>

                            <a href="/src/screens/projects/start-project.html" class="block border-2 border-dashed border-gray-300 dark:border-zinc-700 rounded-xl p-8 text-center hover:bg-gray-50 dark:hover:bg-zinc-900 hover:border-gray-400 dark:hover:border-zinc-500 transition-all group mt-6">
                                <div class="w-12 h-12 bg-gray-100 dark:bg-zinc-800 rounded-full flex items-center justify-center mx-auto mb-3 group-hover:scale-110 transition-transform">
                                    <i class="fas fa-plus text-gray-400 group-hover:text-ink dark:group-hover:text-white"></i>
                                </div>
                                <p class="text-sm font-bold text-gray-500 group-hover:text-ink dark:group-hover:text-white uppercase">Accept New Quest</p>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    
    <!-- MOBILE BOTTOM FLOATING DOCK -->
    <nav class="lg:hidden fixed bottom-6 left-6 right-6 z-50 animate-fade-in">
        <div class="bg-white/95 dark:bg-zinc-900/95 backdrop-blur-md border-2 border-ink dark:border-zinc-700 rounded-2xl shadow-neon p-2 flex justify-between items-center">
            
            <button data-tab="overview" class="mobile-nav-btn active flex-1 flex flex-col items-center justify-center gap-1 py-2 rounded-xl transition-all">
                <i class="fas fa-id-card text-lg"></i>
                <span class="text-[9px] font-bold font-mono uppercase">Sheet</span>
            </button>
            
            <div class="w-px h-8 bg-gray-200 dark:bg-zinc-700"></div>
            
            <button data-tab="projects" class="mobile-nav-btn flex-1 flex flex-col items-center justify-center gap-1 py-2 rounded-xl transition-all">
                <i class="fas fa-scroll text-lg"></i>
                <span class="text-[9px] font-bold font-mono uppercase">Quests</span>
            </button>
            
            <div class="w-px h-8 bg-gray-200 dark:bg-zinc-700"></div>
            
            <button id="logout-btn-mobile" class="flex-1 flex flex-col items-center justify-center gap-1 py-2 rounded-xl text-pop-pink hover:bg-pop-pink/10 transition-all">
                <i class="fas fa-power-off text-lg"></i>
                <span class="text-[9px] font-bold font-mono uppercase">Exit</span>
            </button>
            
        </div>
    </nav>

    <div id="alert-modal-placeholder"></div>

    <!-- MAIN LOGIC -->
    <script src="/src/js/main/alert.js"></script>
    <script src="/src/js/connections/account.js"></script>
</body>
</html>