<!DOCTYPE html>
<html lang="en" class="scroll-smooth text-[16px]">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LHA | Gamer Watch</title>
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;900&family=Space+Grotesk:wght@700&family=JetBrains+Mono:wght@500&display=swap" rel="stylesheet">
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: { 'display': ['"Space Grotesk"'], 'body': ['"Outfit"'], 'mono': ['"JetBrains Mono"'] },
                    colors: { 'ink': '#09090b', 'paper': '#fafafa', 'primary': '#8b5cf6', 'pop-pink': '#ff477e', 'cyber-cyan': '#22d3ee', 'neon-lime': '#bef264' },
                    boxShadow: { 'manga': '5px 5px 0px 0px #09090b', 'manga-white': '5px 5px 0px 0px #fafafa' }
                }
            }
        }
    </script>
    <style>
        .bg-halftone { background-image: radial-gradient(#e5e7eb 2px, transparent 2px); background-size: 20px 20px; }
        .dark .bg-halftone { background-image: radial-gradient(#27272a 2px, transparent 2px); }
        .app-lock-pattern {
            background-image: repeating-linear-gradient(45deg, #000 0, #000 1px, transparent 0, transparent 10px);
            opacity: 0.1;
        }
    </style>
</head>
<body class="text-ink bg-paper dark:bg-ink dark:text-paper font-body transition-colors duration-300 overflow-x-hidden">
    
    <div class="fixed inset-0 z-[-1] bg-halftone opacity-40 pointer-events-none"></div>

    <!-- Navbar -->
    <nav id="navbar" class="fixed top-0 w-full z-50 px-4 py-4">
        <div class="container mx-auto max-w-7xl bg-white/90 dark:bg-ink/90 backdrop-blur border-2 border-ink dark:border-paper rounded-xl px-5 py-3 flex justify-between items-center shadow-manga dark:shadow-manga-white">
            <a href="../../../src/screens/main/index.html" class="font-display font-bold text-xl">LHA <span class="text-cyber-cyan">/// WATCH</span></a>
            <div class="flex items-center gap-4">
                <div class="hidden md:flex items-center gap-2 font-mono text-xs text-gray-500">
                    <span class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span>
                    <span>LIVE FEED</span>
                </div>
                <a href="../../../src/screens/main/index.html" class="font-bold hover:text-cyber-cyan">Back to Base</a>
            </div>
        </div>
    </nav>

    <!-- Header / Mobile App Promo -->
    <header class="pt-32 pb-8 container mx-auto px-6 max-w-7xl">
        <div class="flex flex-col md:flex-row justify-between items-end gap-6 mb-12 border-b-2 border-ink dark:border-paper pb-8">
            <div>
                <h1 class="font-display font-black text-6xl md:text-8xl uppercase leading-[0.9] mb-4">
                    Top <span class="text-transparent bg-clip-text bg-gradient-to-r from-cyber-cyan to-pop-pink">Frags.</span>
                </h1>
                <p class="text-xl text-gray-600 dark:text-gray-400 font-mono">
                    <i class="fas fa-satellite-dish text-red-500 mr-2 animate-pulse"></i> Receiving Live Transmissions
                </p>
            </div>
            
            <!-- App Promo Card -->
            <div class="bg-ink text-paper p-4 rounded max-w-md w-full shadow-manga flex items-center gap-4 border-2 border-primary">
                <div class="text-3xl text-primary"><i class="fas fa-mobile-alt"></i></div>
                <div>
                    <h4 class="font-bold text-lg leading-none uppercase text-primary">Deploy to Squad Up</h4>
                    <p class="text-xs text-gray-400 font-mono mt-1">Chat, LFG, and Posting are exclusive to the LHA Mobile App.</p>
                </div>
                <button class="ml-auto bg-primary hover:bg-violet-600 text-white px-3 py-2 rounded font-bold text-xs uppercase">
                    Get App
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="container mx-auto px-6 max-w-7xl pb-24">
        <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
            
            <!-- LEFT: Video Feed (Clips) -->
            <div class="lg:col-span-8">
                <div class="flex items-center gap-4 mb-6">
                    <h2 class="font-display font-black text-2xl uppercase">Trending Clips</h2>
                    <div class="h-px bg-gray-300 flex-1"></div>
                    <select class="bg-transparent font-mono text-xs font-bold border border-gray-300 rounded px-2 py-1">
                        <option>Most Viewed</option>
                        <option>Recent</option>
                    </select>
                </div>

                <!-- Feed Container -->
                <div id="clips-feed" class="space-y-8">
                    <!-- Clips injected via JS -->
                </div>
                
                <div class="text-center mt-12">
                    <p class="font-mono text-sm text-gray-500 mb-2">End of public feed.</p>
                    <button class="bg-white dark:bg-gray-800 border-2 border-ink dark:border-paper px-6 py-2 font-bold uppercase text-sm hover:bg-cyber-cyan hover:text-ink transition-colors">
                        Load More on App
                    </button>
                </div>
            </div>

            <!-- RIGHT: Online Roster (Sidebar) -->
            <div class="lg:col-span-4">
                <div class="sticky top-24">
                    <div class="bg-white dark:bg-gray-900 border-2 border-ink dark:border-paper shadow-manga p-0 overflow-hidden">
                        <div class="bg-cyber-cyan p-3 border-b-2 border-ink flex justify-between items-center">
                            <h3 class="font-display font-bold text-xl uppercase text-ink">Active Operators</h3>
                            <span class="bg-ink text-cyber-cyan text-[10px] font-mono px-2 py-0.5 rounded">LIVE</span>
                        </div>
                        
                        <!-- Roster List -->
                        <div id="roster-list" class="divide-y divide-gray-200 dark:divide-gray-800 max-h-[500px] overflow-y-auto">
                            <!-- Players injected via JS -->
                        </div>

                        <!-- Locked Chat Visual -->
                        <div class="bg-gray-100 dark:bg-gray-800 p-4 border-t-2 border-ink dark:border-paper relative overflow-hidden group cursor-pointer" onclick="triggerAppPromo()">
                            <div class="absolute inset-0 app-lock-pattern"></div>
                            <div class="relative z-10 text-center opacity-60 group-hover:opacity-100 transition-opacity">
                                <i class="fas fa-lock text-2xl mb-2 text-gray-400"></i>
                                <p class="font-display font-bold uppercase text-sm">Chat Offline</p>
                                <p class="text-[10px] font-mono text-gray-500">Open LHA Mobile to chat with these players.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Placeholder -->
    <div id="alert-modal-placeholder"></div>

    <!-- Scripts -->
    <script src="../../../src/js/main/alert.js"></script>
    <script src="../../../src/js/main/main.js"></script>

    <script>
        // --- 1. Modal Logic (Localized for this page) ---
        let alertModalElements = {};

        // Cache elements after they are loaded
        const cacheModalElements = () => {
            alertModalElements = {
                modal: document.getElementById('alert-modal'),
                dialog: document.getElementById('alert-dialog'),
                iconContainer: document.getElementById('alert-icon-container'),
                title: document.getElementById('alert-title'),
                message: document.getElementById('alert-message'),
                confirmButton: document.getElementById('alert-confirm-button'),
                cancelButton: document.getElementById('alert-cancel-button'),
            };
        };

        // Load Modal HTML
        const loadAlertModal = async () => {
            if (document.getElementById('alert-modal')) {
                cacheModalElements();
                return;
            }
            try {
                const response = await fetch('../../components/alert.html');
                if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                const html = await response.text();
                document.getElementById('alert-modal-placeholder').innerHTML = html;
                cacheModalElements();
            } catch (error) {
                console.error("Could not load alert modal:", error);
            }
        };

        // Show Modal Function
        const showAlertModal = ({ title, message, iconHTML, confirmText = 'Confirm', cancelText = 'Cancel', onConfirm }) => {
            if (!alertModalElements.modal) cacheModalElements();

            if (!alertModalElements.modal || typeof openAlertModal === 'undefined') {
                if(confirm(`${title}\n${message}`)) onConfirm();
                return;
            }

            alertModalElements.title.textContent = title;
            alertModalElements.message.textContent = message;
            alertModalElements.iconContainer.innerHTML = iconHTML;

            // Recreate buttons to strip old listeners
            const newConfirm = alertModalElements.confirmButton.cloneNode(true);
            newConfirm.textContent = confirmText;
            alertModalElements.confirmButton.parentNode.replaceChild(newConfirm, alertModalElements.confirmButton);
            alertModalElements.confirmButton = newConfirm;

            const newCancel = alertModalElements.cancelButton.cloneNode(true);
            newCancel.textContent = cancelText;
            alertModalElements.cancelButton.parentNode.replaceChild(newCancel, alertModalElements.cancelButton);
            alertModalElements.cancelButton = newCancel;

            openAlertModal(); // From alert.js

            alertModalElements.confirmButton.onclick = () => {
                if (typeof onConfirm === 'function') onConfirm();
                closeAlertModal();
            };
            alertModalElements.cancelButton.onclick = closeAlertModal;
        };


        // --- 2. Data Simulation ---

        const clipsData = [
            { id: 101, title: "Ace on Ascent (Ranked)", game: "Valorant", author: "Jett_Main", views: "12.5k", thumbnail: "https://images.unsplash.com/photo-1542751371-adc38448a05e?q=80&w=800&auto=format&fit=crop", avatar: "https://api.dicebear.com/7.x/avataaars/svg?seed=Jett" },
            { id: 102, title: "Impossible Kraber Shot", game: "Apex Legends", author: "Wraith_TTV", views: "8.2k", thumbnail: "https://images.unsplash.com/photo-1538481199705-c710c4e965fc?q=80&w=800&auto=format&fit=crop", avatar: "https://api.dicebear.com/7.x/avataaars/svg?seed=Wraith" },
            { id: 103, title: "EVO Moment Recreated??", game: "SF6", author: "FGC_Legend", views: "45k", thumbnail: "https://images.unsplash.com/photo-1511512578047-dfb367046420?q=80&w=800&auto=format&fit=crop", avatar: "https://api.dicebear.com/7.x/avataaars/svg?seed=Ryu" }
        ];

        const onlinePlayers = [
            { name: "Faker_Clone", game: "League", status: "In Match", rank: "Challenger" },
            { name: "Shroud_V2", game: "Valorant", status: "Lobby", rank: "Radiant" },
            { name: "Tenz_Fan", game: "Valorant", status: "In Match", rank: "Immortal" },
            { name: "ApexPred", game: "Apex", status: "In Match", rank: "Predator" },
            { name: "SpeedRunner", game: "Elden Ring", status: "Boss", rank: "God" },
        ];


        // --- 3. Rendering & Interaction ---

        const init = async () => {
            await loadAlertModal();

            // Render Clips
            const feedContainer = document.getElementById('clips-feed');
            clipsData.forEach(clip => {
                const html = `
                    <div class="bg-white dark:bg-gray-900 border-2 border-ink dark:border-paper shadow-sm group">
                        <div class="relative h-64 md:h-80 bg-black overflow-hidden cursor-pointer">
                            <img src="${clip.thumbnail}" class="w-full h-full object-cover opacity-80 group-hover:opacity-60 transition-opacity">
                            <div class="absolute inset-0 flex items-center justify-center">
                                <div class="w-16 h-16 bg-white/20 backdrop-blur rounded-full flex items-center justify-center text-white text-2xl border-2 border-white group-hover:scale-110 transition-transform"><i class="fas fa-play ml-1"></i></div>
                            </div>
                            <div class="absolute top-4 left-4"><span class="bg-ink text-white text-xs font-bold uppercase px-2 py-1">${clip.game}</span></div>
                        </div>
                        <div class="p-4 flex gap-4">
                            <img src="${clip.avatar}" class="w-10 h-10 rounded-full border border-gray-300">
                            <div class="flex-1">
                                <h3 class="font-display font-bold text-xl leading-tight mb-1 group-hover:text-primary transition-colors">${clip.title}</h3>
                                <div class="flex justify-between items-center text-xs font-mono text-gray-500"><span>Uploaded by <span class="text-ink dark:text-white font-bold">${clip.author}</span></span><span><i class="fas fa-eye mr-1"></i> ${clip.views}</span></div>
                            </div>
                        </div>
                        <div class="bg-gray-100 dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 px-4 py-2 flex justify-between items-center">
                            <div class="flex gap-4 text-gray-400">
                                <button class="hover:text-pop-pink transition-colors" onclick="triggerAppPromo()"><i class="far fa-heart"></i></button>
                                <button class="hover:text-cyber-cyan transition-colors" onclick="triggerAppPromo()"><i class="far fa-comment-alt"></i></button>
                                <button class="hover:text-primary transition-colors" onclick="triggerAppPromo()"><i class="fas fa-share"></i></button>
                            </div>
                            <span class="text-[10px] font-mono text-gray-400 uppercase">App Only Feature</span>
                        </div>
                    </div>`;
                feedContainer.insertAdjacentHTML('beforeend', html);
            });

            // Render Roster
            const rosterContainer = document.getElementById('roster-list');
            onlinePlayers.forEach(player => {
                const html = `
                    <div class="p-3 flex items-center gap-3 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors cursor-pointer group" onclick="triggerAppPromo()">
                        <div class="relative"><img src="https://api.dicebear.com/7.x/avataaars/svg?seed=${player.name}" class="w-8 h-8 rounded border border-gray-300 bg-white"><div class="absolute -bottom-1 -right-1 w-3 h-3 bg-green-500 border-2 border-white rounded-full"></div></div>
                        <div class="flex-1 min-w-0">
                            <div class="flex justify-between items-center"><h4 class="font-bold text-sm truncate">${player.name}</h4><span class="text-[10px] border border-gray-300 px-1 rounded text-gray-500">${player.rank}</span></div>
                            <div class="text-xs font-mono text-gray-500 truncate flex items-center gap-1"><i class="fas fa-gamepad text-[10px]"></i> ${player.game}</div>
                        </div>
                        <button class="text-xs bg-ink text-white px-2 py-1 opacity-0 group-hover:opacity-100 transition-opacity">Chat</button>
                    </div>`;
                rosterContainer.insertAdjacentHTML('beforeend', html);
            });
        };

        // Exposed Function for Buttons
        window.triggerAppPromo = () => {
            const icon = '<i class="fas fa-mobile-alt text-4xl text-pop-pink mb-2 animate-bounce"></i>';
            showAlertModal({
                title: 'RESTRICTED AREA',
                message: 'Chatting, Squad Finding, and Posting are exclusive to the LHA Mobile App. Download it now to unlock full access.',
                iconHTML: icon,
                confirmText: 'Get App',
                cancelText: 'Maybe Later',
                onConfirm: () => {
                    // Simulation of redirect
                    console.log("Redirecting to App Store...");
                }
            });
        };

        // Theme Toggle
        if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark')
        }

        // Start
        init();
    </script>
</body>
</html>